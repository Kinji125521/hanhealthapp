{"version":3,"file":"static/js/777.07033cf6.chunk.js","mappings":"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","sources":["../node_modules/antd/es/layout/index.js","../node_modules/@ant-design/icons-svg/es/asn/HomeOutlined.js","../node_modules/@ant-design/icons/es/icons/HomeOutlined.js","../node_modules/@ant-design/icons-svg/es/asn/LogoutOutlined.js","../node_modules/@ant-design/icons/es/icons/LogoutOutlined.js","pages/Layout/index.js","store/login.Store.js","store/user.Store.js","store/channel.Store.js","store/index.js"],"sourcesContent":["import InternalLayout, { Content, Footer, Header } from './layout';\nimport Sider from './Sider';\nconst Layout = InternalLayout;\nLayout.Header = Header;\nLayout.Footer = Footer;\nLayout.Content = Content;\nLayout.Sider = Sider;\nexport default Layout;","// This icon file is generated automatically.\nvar HomeOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 00-44.4 0L77.5 505a63.9 63.9 0 00-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0018.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z\" } }] }, \"name\": \"home\", \"theme\": \"outlined\" };\nexport default HomeOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport HomeOutlinedSvg from \"@ant-design/icons-svg/es/asn/HomeOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar HomeOutlined = function HomeOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: HomeOutlinedSvg\n  }));\n};\nHomeOutlined.displayName = 'HomeOutlined';\nexport default /*#__PURE__*/React.forwardRef(HomeOutlined);","// This icon file is generated automatically.\nvar LogoutOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z\" } }] }, \"name\": \"logout\", \"theme\": \"outlined\" };\nexport default LogoutOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport LogoutOutlinedSvg from \"@ant-design/icons-svg/es/asn/LogoutOutlined\";\nimport AntdIcon from '../components/AntdIcon';\nvar LogoutOutlined = function LogoutOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: LogoutOutlinedSvg\n  }));\n};\nLogoutOutlined.displayName = 'LogoutOutlined';\nexport default /*#__PURE__*/React.forwardRef(LogoutOutlined);","import { Layout, Menu, Popconfirm } from 'antd'\r\nimport { Outlet, Link, useLocation, useNavigate } from 'react-router-dom'\r\nimport { observer } from 'mobx-react-lite'\r\nimport {\r\n  HomeOutlined,\r\n  DiffOutlined,\r\n  EditOutlined,\r\n  LogoutOutlined\r\n} from '@ant-design/icons'\r\nimport './index.scss'\r\nimport { useStore } from '@/store'\r\nimport logo from '@/assets/logo.png'\r\nimport { useEffect, useState } from 'react'\r\nimport { removeUser } from '@/utils/storageUtils'\r\nimport { getUser } from '@/utils/storageUtils'\r\nimport { getRem, removeRem } from '@/utils/remstoreUtils'\r\n\r\nimport axios from 'axios'\r\nconst { Header, Sider } = Layout\r\n\r\n\r\nconst GeekLayout = () => {\r\n  const { pathname } = useLocation()\r\n  const { loginStore, channelStore } = useStore()\r\n  const [Info, setInfo] = useState()\r\n  var tel = getUser('user_key')\r\n  var rem = Number(getRem('remember'))\r\n  useEffect(() => {\r\n    getUserInfo()\r\n    //channelStore.loadChannelList()\r\n  }, [])\r\n\r\n  // 確定退出\r\n  const navigate = useNavigate()\r\n  const onConfirm = () => {\r\n    // 退出登錄 / 刪除 token / 跳回到登錄\r\n    if (rem === 0) {\r\n      removeUser('user_key')\r\n      removeRem('remember')\r\n    }\r\n    removeRem('remember')\r\n    loginStore.logOut()\r\n    navigate('/login')\r\n  }\r\n\r\n\r\n  const getUserInfo = async () => {\r\n    // 調用接口獲取數據\r\n    const res = await axios.get(`https://192.168.11.118:7000/user/profile/${tel}`)\r\n    var userInfo = res.data\r\n    var phone = userInfo.data[0].Tel\r\n    setInfo(phone)\r\n  }\r\n\r\n  const items = [\r\n    { label: <Link to='/'>數據概覽</Link>, key: \"/\", icon: <HomeOutlined /> },\r\n    /*{ label: <Link to='/article'>內容管理</Link>, key: \"/article\", icon: <DiffOutlined /> },\r\n    { label: <Link to='/publish'>發布文章</Link>, key: \"/publish\", icon: <EditOutlined /> }*/\r\n  ]\r\n\r\n\r\n  return (\r\n    <Layout >\r\n      <Header className=\"header\">\r\n        <img className='home-logo' src={logo} alt='' />\r\n        <div className=\"user-info\">\r\n          <span className=\"user-name\">歡迎~{Info}</span>\r\n          <span className=\"user-logout\">\r\n            <Popconfirm\r\n              title=\"是否需要退出?\" okText=\"退出\" cancelText=\"取消\" onConfirm={onConfirm}>\r\n              <LogoutOutlined /> 退出\r\n            </Popconfirm>\r\n          </span>\r\n        </div>\r\n      </Header>\r\n      <Layout>\r\n        <Layout className=\"layout-content\" style={{ padding: 20 }}>\r\n          {/* 二級路由出口 */}\r\n          <Outlet />\r\n        </Layout>\r\n      </Layout>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nexport default observer(GeekLayout)","// login module\r\nimport { makeAutoObservable } from 'mobx'\r\nimport { http, setToken, getToken, removeToken, saveUser, getUser, removeUser } from '@/utils'\r\n//import app from './server'\r\nimport axios from 'axios'\r\n\r\n\r\nclass LoginStore {\r\n  token = getToken() || ''\r\n  constructor() {\r\n    // 響應式\r\n    makeAutoObservable(this)\r\n  }\r\n  login = async ({ id, tel }) => {\r\n    // 調用登入接口\r\n    const res = await axios.post('https://192.168.11.118:7000/signin', {\r\n      id,\r\n      tel\r\n    })\r\n    // 存入 token\r\n    this.token = res.data.token\r\n    // 存入 ls\r\n    setToken(this.token)\r\n  }\r\n  // 退出登入\r\n  logOut = () => {\r\n    this.token = ''\r\n    removeToken()\r\n  }\r\n}\r\n\r\nexport default LoginStore","import { makeAutoObservable } from 'mobx'\r\nimport { http } from '@/utils'\r\nimport { getUser } from '@/utils/storageUtils'\r\nimport axios from 'axios'\r\n\r\nclass UserStore {\r\n  userInfo = {}\r\n  constructor() {\r\n    makeAutoObservable(this)\r\n  }\r\n\r\n  getUserInfo = async ({ tel }) => {\r\n    // 調用接口獲取數據\r\n    const res = await axios.get(`https://192.168.11.118:7000/user/profile`)\r\n    this.userInfo = res.data\r\n  }\r\n}\r\n\r\nexport default UserStore","import { makeAutoObservable } from 'mobx'\r\nimport { http } from '@/utils'\r\nclass ChannelStore {\r\n  channelList = []\r\n  constructor() {\r\n    makeAutoObservable(this)\r\n  }\r\n\r\n  // article / publish 哪邊調用這個函數呢\r\n  loadChannelList = async () => {\r\n    const res = await http.get('/channels')\r\n    this.channelList = res.data.channels\r\n  }\r\n}\r\n\r\nexport default ChannelStore","// 把所有的模組做統一處理\r\n// 導出一個統一的方法 useStore\r\n\r\nimport React from \"react\"\r\nimport LoginStore from \"./login.Store\"\r\nimport UserStore from \"./user.Store\"\r\nimport ChannelStore from \"./channel.Store\"\r\n\r\nclass RootStore {\r\n  constructor() {\r\n    this.loginStore = new LoginStore()\r\n    this.userStore = new UserStore()\r\n    this.channelStore = new ChannelStore()\r\n    // ... 每新建立的不同功能的 Store，就必須在此新增一個實例，來進行集中管理\r\n  }\r\n}\r\n\r\n// 實例化根\r\n// 導出 useStore context\r\n\r\nconst rootStore = new RootStore()\r\nconst context = React.createContext(rootStore)\r\n\r\nconst useStore = () => React.useContext(context)\r\n\r\nexport { useStore }"],"names":["Layout","InternalLayout","Header","Footer","Content","Sider","HomeOutlined","props","ref","React","AntdIcon","_objectSpread","icon","HomeOutlinedSvg","displayName","LogoutOutlined","LogoutOutlinedSvg","observer","useLocation","pathname","useStore","loginStore","channelStore","useState","Info","setInfo","tel","getUser","rem","Number","getRem","useEffect","getUserInfo","navigate","useNavigate","axios","res","userInfo","data","phone","Tel","className","src","logo","alt","title","okText","cancelText","onConfirm","removeUser","removeRem","logOut","style","padding","LoginStore","token","getToken","login","id","setToken","removeToken","makeAutoObservable","this","UserStore","channelList","loadChannelList","http","channels","rootStore","userStore","ChannelStore","context"],"sourceRoot":""}